:root{--bg:#F7F8FA;--card:#fff;--muted:#6b7280;--accent:#02008a;--sidebar-width:170px;--sidebar-collapsed-width:52px;--topbar-height:64px;--bunker-min-height:160px;--bunker-max-height:460px;--bunker-top-line-distance: 46px;--arrow-width: 3px;--bunker-arrow-height: 90px;--arrow-head-size: 12px;--app-gap:12px;--content-padding:12px}html,body{height:100%;margin:0;padding:0;width:100%;overflow-x:hidden;overflow-y:hidden;font-family:Inter,system-ui,Arial,sans-serif;background:var(--bg);color:#111;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.app{display:flex;height:100vh;gap:var(--app-gap);box-sizing:border-box}.sidebar{width:var(--sidebar-width);background:#fff;border-right:1px solid rgba(0,0,0,.04);padding:12px 8px;box-shadow:0 2px 8px #00000008;display:flex;flex-direction:column;gap:6px;box-sizing:border-box;flex-shrink:0;min-width:var(--sidebar-collapsed-width);overflow-y:auto;max-height:100vh;transition:width .22s ease}.sidebar.collapsed{width:var(--sidebar-collapsed-width)}.sidebar .title{font-weight:800;color:var(--accent);padding:8px 10px;font-size:13px}.sidebar .item{display:flex;align-items:center;padding:8px 10px;border-radius:8px;cursor:pointer;font-weight:700;color:#111;font-size:13px;gap:8px;white-space:nowrap}.sidebar .item:hover{background:#02008a0d}.sidebar .item.active{background:var(--accent);color:#fff;box-shadow:0 6px 18px #02008a1f}.sidebar .s-icon{width:28px;height:28px;display:inline-flex;align-items:center;justify-content:center;background:#02008a0f;border-radius:6px;font-weight:800;color:var(--accent)}.sidebar .s-label{display:inline-block}.sidebar.collapsed .s-label{display:none}.topbar{height:var(--topbar-height);min-height:var(--topbar-height);display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:0;flex-shrink:0}.topbar .left{display:flex;align-items:center;gap:12px}.controls{display:flex;gap:8px;align-items:center}.controls input{padding:8px 10px;border-radius:8px;border:1px solid #e6e6e6;width:110px;font-size:14px;background:#fff;cursor:pointer}.hamburger{width:42px;height:36px;display:inline-flex;align-items:center;justify-content:center;cursor:pointer;border-radius:8px}.hamburger:hover{background:#00000008}.hamburger .lines{width:18px;height:14px;position:relative}.hamburger .lines span{position:absolute;left:0;right:0;height:2px;background:#222;border-radius:2px}.hamburger .lines span:nth-child(1){top:0}.hamburger .lines span:nth-child(2){top:6px}.hamburger .lines span:nth-child(3){top:12px}.layout-card{background:var(--card);border-radius:12px;padding:12px;box-shadow:0 10px 30px #0208170f;position:relative;overflow:visible;display:flex;flex-direction:column;gap:12px;height:calc(100% - var(--topbar-height) - 12px);box-sizing:border-box}.layout-row{display:flex;gap:12px;align-items:flex-start;flex:1 1 auto;min-height:0;flex-wrap:wrap}.diagram-column{flex:1 1 0;min-width:0;display:flex;flex-direction:column;gap:8px;min-height:0}.stats-column{width:160px;flex-shrink:0;min-width:140px}.stats-panel{width:100%;background:#02008a;color:#fff;padding:8px 10px;border-radius:8px;box-shadow:0 10px 22px #0208171a;display:flex;flex-direction:column;gap:6px;z-index:20;position:sticky;top:calc(var(--topbar-height) + 20px);font-size:13px}.stat-row{display:flex;justify-content:space-between;font-weight:700}.stat-label{opacity:.95;font-weight:600;font-size:12px;color:#fffffff2}.stat-value{font-weight:800;font-size:13px}.diagram-inner{position:relative;padding:8px;min-height:0;display:flex;flex-direction:column;gap:8px}.top-overlay{position:absolute;inset:0;pointer-events:none;z-index:90}.top-line{position:absolute;top:var(--bunker-top-line-distance);left:4%;right:4%;height:3px;background:#000;opacity:1}.arrow{position:absolute;width:var(--arrow-width);background:#000;top:calc(var(--bunker-top-line-distance) + 4px);height:var(--bunker-arrow-height);transform-origin:top center}.arrow:after{content:"";position:absolute;left:calc(50% - 8px);top:100%;width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:var(--arrow-head-size) solid #000}.bunkers-grid{display:flex;gap:18px;align-items:end;padding:18px;flex-wrap:wrap;box-sizing:border-box;justify-content:space-between;width:100%}.bunker{position:relative;flex:1 1 11%;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;min-width:120px;box-sizing:border-box;height:clamp(var(--bunker-min-height),34vh,var(--bunker-max-height));max-height:calc(var(--bunker-max-height))}.bunker svg{width:100%;height:100%;max-height:100%;display:block;object-fit:contain}.bunker .label{position:absolute;bottom:5px;left:50%;transform:translate(-50%);background:#fffffffa;padding:6px 10px;border-radius:8px;box-shadow:0 2px 10px #0000000f;font-weight:700;font-size:13px;white-space:nowrap}.single-bunker-wrap{padding:12px;display:flex;justify-content:center;align-items:flex-start}.single-bunker{width:100%;max-width:920px;height:clamp(240px,66vh,720px);display:flex;flex-direction:column;align-items:center;justify-content:flex-end;position:relative}.single-bunker svg{width:60%;height:92%;max-height:640px;display:block}.single-bunker .label{position:absolute;bottom:-30px;left:50%;transform:translate(-50%);background:#fffffffa;padding:8px 12px;border-radius:10px;font-weight:800;font-size:16px;white-space:nowrap}.coal-tooltip{position:absolute;pointer-events:none;background:#fff;color:#111;border:1px solid rgba(0,0,0,.12);box-shadow:0 6px 18px #0000001f;padding:10px;border-radius:8px;font-size:13px;line-height:1.35;z-index:2000;display:none;min-width:160px}.coal-flow-wrap{margin-top:0;padding:0 0 8px}.coal-flow-title{font-weight:800;margin:6px 18px 8px;color:var(--accent);font-size:14px}.coal-flow-grid{display:flex;gap:12px;align-items:stretch;padding:0 18px;box-sizing:border-box;flex-wrap:wrap}.coal-box{flex:1 1 11%;min-width:110px;height:46px;display:flex;flex-direction:column;align-items:center;justify-content:center;border-radius:10px;background:var(--card);box-shadow:0 8px 20px #0208170f;font-weight:800;font-size:13px;box-sizing:border-box}.coal-box .value{font-size:15px}.coal-box .label{font-size:12px;color:var(--muted);font-weight:700;margin-top:4px}@media(max-width:1100px){.layout-row{flex-direction:column;gap:10px}.stats-column{width:100%;order:2}.sidebar{display:none}.single-bunker svg{width:80%}.coal-flow-grid{gap:8px;padding:0 8px}.coal-box{width:100%;flex-basis:auto}.bunkers-grid{padding:8px;gap:10px}.bunker{height:clamp(180px,30vh,380px)}}@media(max-height:720px){:root{--bunker-top-line-distance: 36px}.bunker{height:clamp(160px,36vh,420px)}.coal-box{height:48px}.topbar{height:56px}.layout-card{padding:10px}}*{box-sizing:border-box}.single-mode .stats-column{display:none!important}.single-mode .diagram-column{flex:1 1 100%!important;min-width:0}.single-mode .single-bunker svg{width:90%!important;max-width:1200px}.single-mode #extraRowWrap,.single-mode #extraRowGrid{display:none!important}.topbar h1{margin:0;font-size:16px;color:var(--accent);font-weight:800;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.controls .btn{padding:8px 12px;border-radius:8px;border:1px solid #e6e6e6;background:#fff;font-weight:700;cursor:pointer;font-size:14px}.controls .btn:hover{box-shadow:0 6px 18px #0208170f}.single-bunker{width:100%;max-width:none;padding:6px 0;display:flex;flex-direction:column;align-items:stretch;justify-content:center}.single-bunker svg{width:100%!important;height:calc(100% - 48px)!important;max-height:none!important;display:block;object-fit:contain}.single-mode .single-bunker svg{width:100%!important}.single-bunker .label{position:relative;bottom:0;margin-top:8px;left:0;transform:none;text-align:center;display:block}.layout-card{height:calc(100% - var(--topbar-height) - 12px);overflow:hidden}html,body{overflow-x:hidden;overflow-y:hidden}.logout-btn{padding:8px 12px;border-radius:8px;border:1px solid #e6e6e6;background:red;font-weight:700;cursor:pointer;font-size:14px;color:#f7f8fa}.main,.content,.diagram-column{display:flex;flex-direction:column;flex:1 1 auto;width:auto;max-width:none}#singleView{display:block;width:100%;max-width:none;margin:0;padding:12px 18px;box-sizing:border-box;background:transparent;box-shadow:none}.single-bunker{width:100%;max-width:none;padding:6px 0;box-sizing:border-box;display:flex;flex-direction:column;align-items:stretch;justify-content:center}.single-bunker svg,#singleSvg{width:100%!important;height:auto!important;max-height:calc(100vh - var(--topbar-height,64px) - 140px);display:block}#singleLabel,.single-bunker .label{margin-top:14px;text-align:center;font-weight:800;font-size:18px}.stats-panel{z-index:999!important;position:sticky!important;top:calc(var(--topbar-height) + 12px)!important}.layout-card{overflow:visible!important}.app:not(.single-mode) .stats-column{display:block!important}@media(min-width:1100px){.layout-row{flex-wrap:nowrap;align-items:stretch;gap:12px;min-height:0}.diagram-column{flex:1 1 0;min-width:0;overflow:auto;max-height:calc(100% + -0px)}.stats-column{flex:0 0 160px;width:160px;order:2}.bunkers-grid{box-sizing:border-box;flex:1 1 auto;padding-right:12px;overflow:hidden}}@media(max-width:1099px){.layout-row{flex-wrap:wrap}.stats-column{width:100%;order:2;flex:0 0 auto}.diagram-column{width:100%;order:1;overflow:visible}}.bunkers-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(90px,1fr));gap:12px;align-items:end;width:100%}@media(min-width:1300px){.bunkers-grid{grid-template-columns:repeat(8,1fr)}}.bunker .arrow,.bunker>.arrow{left:50%;transform:translate(-50%);position:absolute;top:calc(var(--bunker-top-line-distance) + 4px)}@keyframes blink-red-white{0%{background-color:#fff;color:#0b0b0b}50%{background-color:#ff4d4d;color:#fff}to{background-color:#fff;color:#0b0b0b}}.coal-box .value.blinking{animation:blink-red-white 1s linear infinite;padding:2px 6px;border-radius:6px;display:inline-block;box-shadow:0 4px 12px #ff4d4d14}.coal-box .value.done{background:#0ea5a0;color:#fff;padding:2px 6px;border-radius:6px;display:inline-block}#unitSelector{display:flex;gap:6px;padding:6px;justify-content:center}.unit-btn{background-color:#1f2937;color:#fff;border:1.5px solid transparent;border-radius:6px;padding:4px 10px;font-size:13px;font-weight:500;cursor:pointer;transition:all .25s ease-in-out;box-shadow:0 1px 3px #00000026}.unit-btn:hover{background-color:#374151;transform:translateY(-1px)}.unit-btn.active{background-color:#2563eb;border-color:#93c5fd;box-shadow:0 0 6px #2563eb80;transform:translateY(-1px)}
